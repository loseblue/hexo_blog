title: LTE中ROHC相关基础知识
date: 2015-12-22 16:32:28
tags: [LTE, ROHC]
---


## ROCH定义
**ROHC** robust header compression

<!--more-->
 
## 3GPP使用的ROHC
3GPP LTE 36.323对PDCP子层的规范中, 使用了RFC3095, RFC3843, RFC4995, RFC4996, RFC4815, RFC5225
 
| 标示值 | 包头压缩   | 协议             |
| :--    | :--        | :--              |
| 0x000  | 无压缩     | RFC4995          |
| 0x001  | RTP/UDP/IP | RFC3095, RFC4815 |
| 0x002  | UDP/IP     | RFC3095, RFC4815 |
| 0x003  | ESP/IP     | RFC3095, RFC4815 |
| 0x004  | IP         | RFC3843, RFC4815 |
| 0x006  | TCP/IP     | RFC4996          |
| 0x101  | RTP/UDP/IP | RFC5225          |
| 0x102  | UDP/IP     | RFC5225          |
| 0x103  | ESP/IIP    | RFC5225          |
| 0x104  | IP         | RFC5225          |
 
 
## ROHC状态
### ROHC压缩状态
* **IR** (initiation adn refresh state)
压缩方连续发送全部IP头信息和流关联标识符(PID和CID)
* **FO** (first order)
压缩方仅传递完整的动态信头域信息
* **SO** (second order)
压缩方根据动态域变化规律, 仅传递动态域的压缩值, 此时发送压缩率最高的压缩分组
 
### ROHC解压缩状态
* **NC** (no context)
解压方没有IP信义静态和动态域信息, 需要压缩方在IR状态发送包含完整信头的分组.
* **SC** (static context)
解压方获得了足够的静态域信息, 与压缩方的FO状态相对应, 希望接收到包含完整动态信头的ROHC压缩分组.
* **FC** (full contest)
解压方获得了足够的静态域信息和动态域的变化规律信息时所处的状态, 与压缩方SO状态相对应, 能够接收压缩方在SO状态所发送的ROHC压缩分组.
 
解压开始在NC状态, 成功解压一个ROHC包进入FC状态, 在FC状态连续K1个包解压失败进入SC状态.  SC状态下成功解压一个ROHC包进入FC状态, 连续K2个包解压失败进入NC状态.  K1=K2=3时性能最优.
 
## ROHC工作模式
* **单向(uni-direcfional)U模**
当不存在或不能使用反馈信道时, ROHC工作在U模式, 此时解压方不能向压缩方发送反馈信息. 为保证压缩健壮性和压缩率, 压缩方采用乐观逼近原则和周期性原则进行状态转移.
    * 乐观逼近原则: 在IR状态或FO状态时, 压缩方向解压方连续发送n个分组时就认为解压方建立了正确的解压文景, 于是向高级FO, SO状态转移.
    * 周期性原则: 压缩方在FO, SO状态一定时间timeout后, 就转移到低级压缩状态.
 
根据仿真得出n=3, timeout=4s时性能最优.
 
* **双向乐观(bi-directional optimistic)O模式**
当无线链路存在可以利用的反馈信道时, ROHC工作在O模式, 压缩方向高级状态转移采用乐观逼近原则或者正反馈原则, 向低级状态转移采用负反馈原则.
    * 正反馈原则: 当无线链路允许发送反馈分组的时候, 解压方一旦正确解压具有更新文景特性的分组时, 就向压缩方发送正反馈分组, 允许压缩方向高级压缩状态转移.
    * 负反馈原则: 当无线链路允许发送反馈分组的时候, 解压方连续错误地解压ROHC分组时, 就要向压缩方发送负反馈分组, 促使压缩方向低级状态转移, 并发送带有完整信息的分组, 以便解压方接收到这些分组后更新解压文景信息, 保持压缩和解压文景同步.
 
* **双向可靠(bi-directionalreliable)R模式**
当无线链路质量比较好的时候, 状态转移完全采用反馈原则. 压缩方向高级状态转移采用正反馈原则, 向低级状态转移采用负反馈原则.
